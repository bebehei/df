#!/usr/bin/env bash

# Na, auch schon viel zu viel fÃ¼r git range-diff GEZahlt?

# Git automatic range diff

# Enforce being in a git repository
git rev-parse --is-inside-work-tree >/dev/null || exit $?

GIT_REMOTE=origin

HEAD_REMOT="$(git rev-parse --abbrev-ref ${GIT_REMOTE}/HEAD | cut -d/ -f2)"
HEAD_LOCAL="$(git rev-parse --abbrev-ref               HEAD)"

# Show the next command
set -x

git range-diff "${GIT_REMOTE}/${HEAD_REMOT}..${GIT_REMOTE}/${HEAD_LOCAL}" "${HEAD_REMOT}..${HEAD_LOCAL}"
